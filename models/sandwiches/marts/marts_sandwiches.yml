version: 2

models:
  - name: customers_with_details
    description: ""
    columns:
      - name: customer_id
        description: "{{ doc('customer_id')}}"
        data_tests:
          - unique
          - not_null
          

      - name: full_name
        description: ""

      - name: surname
        description: ""

      - name: givenname
        description: ""

      - name: first_order_date
        description: ""

      - name: first_non_returned_order_date
        description: ""

      - name: most_recent_non_returned_order_date
        description: ""

      - name: order_count
        description: ""

      - name: non_returned_order_count
        description: ""

      - name: total_lifetime_value
        description: ""

      - name: avg_non_returned_order_value
        description: ""

      - name: order_ids
        description: ""

  - name: orders_with_detail
    description: ""
    columns:
      - name: order_id
        description: ""
        data_tests:
          - unique:
              config:
                severity: warn
          - not_null
          

      - name: customer_id
        description: "The unique identifier of a customer.\r\nPrimary key to the customer tables."
        data_tests:
          - relationships:
              to: ref('customers_with_details')
              field: customer_id

      - name: surname
        description: ""

      - name: givenname
        description: ""

      - name: first_order_date
        description: ""

      - name: order_count
        description: ""

      - name: total_lifetime_value
        description: ""

      - name: order_value_dollars
        description: ""

      - name: order_status
        description: ""

      - name: payment_status
        description: ""
